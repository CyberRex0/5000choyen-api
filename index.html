<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<title>5000choyen-api</title>
	<style type="text/css">
		@font-face {
			font-family: 'notobk';
			src: url('notobk-subset.otf') format('opentype');
		}

		@font-face {
			font-family: 'notoserifbk';
			src: url('notoserifbk-subset.otf') format('opentype');
		}

		div {
			display: block;
			margin: 10px 0;
		}

		input[type="radio"] {
			display: none;
		}

		label {
			display: inline-block;
			color: black;
			background-color: lightgray;
			padding: 3px 10px;
		}

		.text-order {
			/* display: none; */
		}

		.text-order input[type="radio"]:checked+label {
			color: white !important;
			background-color: blue !important;
		}

		.background-order input[type="radio"]:checked+label {
			color: white;
			background-color: black;
		}
	</style>
	<script src="settings.js"></script>
	<script src="generator.js"></script>
	<script src="drawer.js"></script>
	<script src="hoshii.js"></script>
	<!--<script src="canvasImage.js"></script>-->
	<script src="canvas.js"></script>
	<script src="main.js"></script>
</head>

<body>
	<div>
		<canvas id="canvas" width="1500px" height="280px"></canvas>
	</div>
	<div>
		<canvas id="canvas2" width="1500px" height="300px"></canvas>
	</div>
	<div style="display:none">
	<div class="text-order">
		<font color="blue">`欲しい!`</font> の描画に
		<input id="bar1" type="radio" name="text-order" value="image">
		<label for="bar1">元ネタの画像を使う</label>
		<input id="bar2" type="radio" name="text-order" value="text" checked>
		<label for="bar2">文字を生成する</label>
	</div>
	<div class="background-order">
		画像を保存するとき背景色を
		<input id="bar3" type="radio" name="background-order" value="transparent">
		<label for="bar3">透明にする</label>
		<input id="bar4" type="radio" name="background-order" value="white" checked>
		<label for="bar4">白にする</label>
	</div>
	<div>
		<span id="labelTop">赤色の文字</span>
		<input type="text" id="textboxTop" size="50" value="" spellcheck="false" oninput="_canvas.redrawTop();">
		<br>
		<span id="labelBottom">銀色の文字</span>
		<input type="text" id="textboxBottom" size="50" value="" spellcheck="false" oninput="_canvas.redrawBottom();">
	</div>
	<div>

	</div>
	</div>

<script type="text/javascript">
function doDraw() {
 var queryString = window.location.href.split('?')[1];
 var args = [...new URLSearchParams(queryString).entries()].reduce((obj, e) => ({...obj, [e[0]]: e[1]}), {});
 //alert(args.a);

 var in1 = document.getElementById("textboxTop");
 var in2 = document.getElementById("textboxBottom");
 
 in1.value = args.top;
 in2.value = args.bottom;
 
 // 何度か呼び出して本来のフォントで描画できるようにする
 for (var i=0; i<2; i++) {
  _canvas.redrawTop();
  _canvas.redrawBottom();
 }
}

window.addEventListener("DOMContentLoaded", function () {
  setTimeout(doDraw, 100);
});
</script>

</body>

</html>